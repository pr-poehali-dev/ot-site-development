-- Заполнение базовыми данными

-- Вставка категорий НПА
INSERT INTO npa_categories (name, icon, description) VALUES
('Трудовой кодекс РФ', 'BookOpen', 'Раздел X - Охрана труда'),
('Федеральные законы', 'Scale', 'ФЗ по охране труда и СОУТ'),
('Приказы Минтруда', 'FileText', 'Нормативные приказы Министерства труда'),
('ГОСТы и СП', 'FileStack', 'Государственные стандарты и своды правил'),
('СанПиНы', 'Heart', 'Санитарно-эпидемиологические правила и нормы'),
('Отраслевые нормы', 'Factory', 'Отраслевые правила и инструкции');

-- Вставка документов НПА
INSERT INTO npa_documents (category_id, title, document_number, document_type, content, keywords, published_date, updated_date) VALUES
(1, 'Трудовой кодекс РФ - Раздел X. Охрана труда', 'ТК РФ', 'Кодекс', 'Основные требования по охране труда, обязанности работодателя и работника', ARRAY['охрана труда', 'трудовой кодекс', 'обязанности работодателя'], '2001-12-30', '2025-12-01'),
(1, 'Статья 212 ТК РФ - Обязанности работодателя по обеспечению безопасных условий труда', 'ТК РФ Ст.212', 'Статья', 'Работодатель обязан обеспечить безопасность работников при эксплуатации зданий, сооружений, оборудования', ARRAY['работодатель', 'безопасность', 'обязанности'], '2001-12-30', '2025-06-15'),
(1, 'Статья 214 ТК РФ - Обязанности работника в области охраны труда', 'ТК РФ Ст.214', 'Статья', 'Работник обязан соблюдать требования охраны труда, правильно применять СИЗ', ARRAY['работник', 'обязанности', 'СИЗ'], '2001-12-30', '2024-08-10'),

(2, 'ФЗ-426 "О специальной оценке условий труда"', '426-ФЗ', 'Федеральный закон', 'Правовые и организационные основы проведения специальной оценки условий труда', ARRAY['СОУТ', 'специальная оценка', 'условия труда'], '2013-12-28', '2026-01-25'),
(2, 'ФЗ-125 "Об обязательном социальном страховании от несчастных случаев"', '125-ФЗ', 'Федеральный закон', 'Страхование работников от несчастных случаев и профзаболеваний', ARRAY['страхование', 'несчастный случай', 'профзаболевания'], '1998-07-24', '2025-11-10'),
(2, 'ФЗ-52 "О санитарно-эпидемиологическом благополучии населения"', '52-ФЗ', 'Федеральный закон', 'Санитарно-эпидемиологические требования к условиям труда', ARRAY['санитария', 'гигиена', 'условия труда'], '1999-03-30', '2025-09-20'),

(3, 'Приказ Минтруда №245 "О требованиях к обучению по охране труда"', 'Приказ №245', 'Приказ', 'Новый порядок обучения по охране труда и проверки знаний требований охраны труда', ARRAY['обучение', 'проверка знаний', 'охрана труда'], '2026-01-27', '2026-01-27'),
(3, 'Приказ Минтруда №766н "Об утверждении Правил по охране труда"', 'Приказ №766н', 'Приказ', 'Типовые правила по охране труда при работах различного вида', ARRAY['правила', 'охрана труда', 'типовые'], '2020-10-29', '2025-12-15'),
(3, 'Приказ Минтруда №988н "Об утверждении Перечня работ повышенной опасности"', 'Приказ №988н', 'Приказ', 'Перечень работ, к которым предъявляются дополнительные требования по охране труда', ARRAY['повышенная опасность', 'перечень работ'], '2021-09-14', '2025-10-05'),

(4, 'ГОСТ 12.0.004-2025 "Организация обучения безопасности труда"', 'ГОСТ 12.0.004-2025', 'ГОСТ', 'Общие положения организации обучения работающих безопасности труда', ARRAY['обучение', 'безопасность труда', 'ГОСТ'], '2025-01-15', '2026-01-20'),
(4, 'ГОСТ 12.1.003-2025 "Шум. Общие требования безопасности"', 'ГОСТ 12.1.003-2025', 'ГОСТ', 'Общие требования безопасности к уровню шума на рабочих местах', ARRAY['шум', 'безопасность', 'рабочие места'], '2025-03-01', '2025-12-01'),
(4, 'СП 2.2.3670-20 "Санитарно-эпидемиологические требования к условиям труда"', 'СП 2.2.3670-20', 'Свод правил', 'Требования к микроклимату, освещению, шуму и вибрации', ARRAY['санитария', 'микроклимат', 'освещение', 'шум'], '2020-01-02', '2025-11-18'),

(5, 'СанПиН 1.2.3685-21 "Гигиенические нормативы и требования"', 'СанПиН 1.2.3685-21', 'СанПиН', 'Гигиенические нормативы по факторам производственной среды и трудового процесса', ARRAY['гигиена', 'нормативы', 'производственная среда'], '2021-01-28', '2026-01-18'),
(5, 'СанПиН 2.2.4.3359-16 "Санитарно-эпидемиологические требования к физическим факторам"', 'СанПиН 2.2.4.3359-16', 'СанПиН', 'Требования к физическим факторам на рабочих местах', ARRAY['физические факторы', 'рабочие места'], '2016-06-21', '2025-08-14'),

(6, 'Правила по охране труда при работе на высоте', 'Приказ №782н', 'Отраслевые правила', 'Требования охраны труда при работах на высоте более 1,8 метра', ARRAY['высота', 'работа на высоте', 'безопасность'], '2020-11-16', '2025-10-22'),
(6, 'Правила по охране труда при эксплуатации электроустановок', 'Приказ №903н', 'Отраслевые правила', 'Требования охраны труда при работе с электроустановками', ARRAY['электробезопасность', 'электроустановки'], '2021-09-15', '2025-09-30');

-- Вставка сотрудников
INSERT INTO employees (full_name, position, department, email, phone, hire_date) VALUES
('Иванов Петр Сергеевич', 'Электрик', 'Служба эксплуатации', 'ivanov@example.com', '+7 (999) 123-45-67', '2020-03-15'),
('Сидорова Анна Викторовна', 'Стропальщик', 'Производственный отдел', 'sidorova@example.com', '+7 (999) 234-56-78', '2021-06-20'),
('Петров Михаил Александрович', 'Офисный работник', 'Административный отдел', 'petrov@example.com', '+7 (999) 345-67-89', '2019-01-10'),
('Козлова Мария Ивановна', 'Лаборант', 'Лаборатория', 'kozlova@example.com', '+7 (999) 456-78-90', '2022-08-05'),
('Смирнов Игорь Дмитриевич', 'Сварщик', 'Производственный отдел', 'smirnov@example.com', '+7 (999) 567-89-01', '2023-02-12');

-- Вставка курсов обучения
INSERT INTO training_courses (title, description, duration_hours, category, is_active) VALUES
('Общая охрана труда', 'Базовый курс по требованиям охраны труда для всех работников', 4, 'Базовый', true),
('Электробезопасность (III группа)', 'Обучение требованиям электробезопасности для электротехнического персонала', 8, 'Специальный', true),
('Работа на высоте', 'Требования охраны труда при работе на высоте более 1,8 метра', 6, 'Специальный', true),
('Пожарная безопасность', 'Меры пожарной безопасности на производственных объектах', 3, 'Базовый', true);

-- Вставка назначений обучения
INSERT INTO training_assignments (employee_id, course_id, assigned_date, deadline_date, completion_date, progress, status) VALUES
(1, 1, '2025-12-01', '2026-02-15', '2026-01-10', 100, 'completed'),
(1, 2, '2025-12-10', '2026-02-28', '2026-01-15', 100, 'completed'),
(2, 1, '2026-01-05', '2026-02-15', NULL, 75, 'in-progress'),
(2, 3, '2026-01-10', '2026-02-10', NULL, 60, 'in-progress'),
(3, 1, '2025-11-15', '2026-02-15', '2025-12-20', 100, 'completed'),
(4, 1, '2026-01-12', '2026-02-15', NULL, 45, 'in-progress'),
(4, 4, '2026-01-12', '2026-02-10', NULL, 30, 'in-progress'),
(5, 1, '2026-01-20', '2026-02-15', NULL, 0, 'not-started'),
(5, 3, '2026-01-20', '2026-02-10', NULL, 0, 'not-started');

-- Вставка тестов
INSERT INTO tests (course_id, title, category, total_questions, passing_score) VALUES
(1, 'Общие требования ОТ', 'Базовый', 45, 70),
(2, 'Электробезопасность', 'Специальный', 68, 80),
(3, 'Работа на высоте', 'Специальный', 38, 75),
(4, 'Пожарная безопасность', 'Базовый', 52, 70);

-- Вставка результатов тестирования
INSERT INTO test_results (employee_id, test_id, score, passed, test_date) VALUES
(1, 2, 95, true, '2026-01-25'),
(3, 1, 88, true, '2026-01-24'),
(2, 3, 92, true, '2026-01-23'),
(4, 4, 68, false, '2026-01-22');

-- Вставка документов
INSERT INTO documents (document_type, title, content, status, created_by, created_date) VALUES
('Приказ', 'О назначении ответственных за охрану труда', '{"text": "Приказ о назначении специалиста по охране труда"}', 'draft', 'Иванов И.И.', '2026-01-28'),
('Акт Н-1', 'Несчастный случай - Иванов П.С.', '{"date": "2026-01-26", "employee": "Иванов П.С.", "details": "Падение с высоты"}', 'completed', 'Сидоров С.С.', '2026-01-26'),
('Направление', 'На медосмотр - список №3', '{"employees": ["Петров М.А.", "Козлова М.И."], "date": "2026-02-01"}', 'sent', 'Петрова П.П.', '2026-01-25'),
('Протокол', 'Проверка знаний по электробезопасности', '{"date": "2026-01-22", "participants": 5, "passed": 5}', 'completed', 'Смирнова А.А.', '2026-01-22');

-- Вставка уведомлений
INSERT INTO notifications (notification_type, title, message, is_read) VALUES
('update', 'Обновление ФЗ-426', 'Обновление ФЗ-426: новые требования к СОУТ', false),
('warning', 'Срок обучения истекает', 'Срок обучения истекает для 5 сотрудников', false),
('new', 'Новый приказ Минтруда', 'Новый приказ Минтруда №245 от 27.01.2026', false),
('info', 'Медосмотр завершен', 'Медосмотр: 12 сотрудников прошли проверку', false);